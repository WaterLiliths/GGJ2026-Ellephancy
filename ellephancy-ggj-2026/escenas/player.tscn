[gd_scene load_steps=65 format=3 uid="uid://cs3h434myxe4r"]

[ext_resource type="Script" uid="uid://d1p6o2ixegcp2" path="res://scripts/player.gd" id="1_esbpa"]
[ext_resource type="Texture2D" uid="uid://csvm86vnc0cmo" path="res://assets/player/mascaras/Agarre oso destra 1.png" id="2_v66k4"]
[ext_resource type="Texture2D" uid="uid://6paf5jvl6rfi" path="res://assets/player/Derecha1.png" id="3_63xfq"]
[ext_resource type="Texture2D" uid="uid://bxnjbxpv4noor" path="res://assets/player/mascaras/Agarre oso destra 2.png" id="3_w80mn"]
[ext_resource type="Texture2D" uid="uid://bvd4ssh4cigjl" path="res://assets/player/Derecha2.png" id="4_3w4lm"]
[ext_resource type="Texture2D" uid="uid://4hi7ohwmshum" path="res://assets/player/mascaras/Agarre oso destra 3.png" id="4_68uh1"]
[ext_resource type="PackedScene" uid="uid://45apkf4ddmvr" path="res://escenas/mascara_tiempos.tscn" id="4_k4kro"]
[ext_resource type="Texture2D" uid="uid://cxqupw3sigdhj" path="res://assets/player/mascaras/Ciervo andar 1.png" id="4_t5tro"]
[ext_resource type="Texture2D" uid="uid://cpw6ii7y1u57o" path="res://assets/player/mascaras/Agarre oso destra 4.png" id="5_0wi6y"]
[ext_resource type="Texture2D" uid="uid://c5ligom05v86b" path="res://assets/player/mascaras/Ciervo andar 2.png" id="5_5vuvg"]
[ext_resource type="Texture2D" uid="uid://cglf1a8ayye6o" path="res://assets/player/Derecha3.png" id="5_8mtn0"]
[ext_resource type="PackedScene" uid="uid://vtcvameos4xx" path="res://escenas/mascara_fuerza.tscn" id="5_t3yu4"]
[ext_resource type="Texture2D" uid="uid://cltkxm76oatqx" path="res://assets/player/mascaras/Ciervo andar 3.png" id="6_ay70r"]
[ext_resource type="PackedScene" uid="uid://x51x8ch6wkl2" path="res://escenas/mascara_traducciones.tscn" id="6_r4hsq"]
[ext_resource type="Texture2D" uid="uid://qhlhqqumb47i" path="res://assets/player/Derecha4.png" id="6_t5tro"]
[ext_resource type="Texture2D" uid="uid://bbglqpt0re5am" path="res://assets/player/mascaras/Agarre oso destra 5.png" id="6_tn1j7"]
[ext_resource type="Texture2D" uid="uid://bbytiaukpxksb" path="res://assets/player/mascaras/Ciervo andar 4.png" id="7_eolwv"]
[ext_resource type="Texture2D" uid="uid://bu1qlfp6ymhdv" path="res://assets/player/mascaras/Agarre oso destra 6.png" id="7_hopxw"]
[ext_resource type="Texture2D" uid="uid://bopqenj5t1lq5" path="res://assets/player/mascaras/Agarre oso destra 7.png" id="8_lrq8u"]
[ext_resource type="Texture2D" uid="uid://cu8qi314lngy1" path="res://assets/player/salto2.png" id="9_63xfq"]
[ext_resource type="Texture2D" uid="uid://clnpid6gioy3k" path="res://assets/player/mascaras/Agarre oso destra 8.png" id="9_h7o46"]
[ext_resource type="Texture2D" uid="uid://dvenunjydyjkx" path="res://assets/player/mascaras/Agarre oso destra 9.png" id="10_0bojb"]
[ext_resource type="Texture2D" uid="uid://c554n5cuecdjw" path="res://assets/player/salto3.png" id="10_3w4lm"]
[ext_resource type="Texture2D" uid="uid://bg5i3ntkwdav5" path="res://assets/player/mascaras/Andar oso destra 1.png" id="11_ay70r"]
[ext_resource type="Texture2D" uid="uid://bxycstgkd61ol" path="res://assets/player/mascaras/Agarre oso destra 10.png" id="11_q2x7o"]
[ext_resource type="Texture2D" uid="uid://71i1tix7ypnj" path="res://assets/player/mascaras/Andar oso destra 2.png" id="12_eolwv"]
[ext_resource type="Texture2D" uid="uid://bnehwmkugfgvt" path="res://assets/player/mascaras/Agarre oso destra 11.png" id="12_y4t0h"]
[ext_resource type="Texture2D" uid="uid://ckefqy8xt6np8" path="res://assets/player/mascaras/Andar oso destra 3.png" id="13_yf8pj"]
[ext_resource type="Texture2D" uid="uid://cecnsk1u42wkq" path="res://assets/player/mascaras/Andar oso destra 4.png" id="14_neflo"]
[ext_resource type="Texture2D" uid="uid://b2e1g8vabqg1t" path="res://assets/player/mascaras/Salmón andar 1.png" id="15_mn7w3"]
[ext_resource type="Texture2D" uid="uid://ceyo20lc3lqey" path="res://assets/player/mascaras/Salmón andar 2.png" id="16_jt2sh"]
[ext_resource type="Texture2D" uid="uid://cpduuopuq1e32" path="res://assets/player/mascaras/Salmón andar 3.png" id="17_sdwtm"]
[ext_resource type="Texture2D" uid="uid://cm8gytihaee2y" path="res://assets/player/mascaras/Salmón andar 4.png" id="18_abcdt"]
[ext_resource type="Texture2D" uid="uid://bh08vgrrp6bh5" path="res://assets/player/mascaras/Salto Ciervo 2.png" id="23_4csdi"]
[ext_resource type="Texture2D" uid="uid://c7k4h75uvb62m" path="res://assets/player/mascaras/Salto Ciervo 3.png" id="24_nrm58"]
[ext_resource type="Texture2D" uid="uid://b1mpifchu6ccb" path="res://assets/player/mascaras/salto oso 2.png" id="27_kc3iu"]
[ext_resource type="Texture2D" uid="uid://b04odj523vlgf" path="res://assets/player/mascaras/salto oso 3.png" id="28_idkqs"]
[ext_resource type="Texture2D" uid="uid://b4b1q25lssm7q" path="res://assets/player/mascaras/Ciervo palanca 1.png" id="30_0wi6y"]
[ext_resource type="Texture2D" uid="uid://bhohihb8b72j7" path="res://assets/player/mascaras/Salto Salmón 2.png" id="31_ewafl"]
[ext_resource type="Texture2D" uid="uid://bror7tai0gkgv" path="res://assets/player/mascaras/Ciervo palanca 2.png" id="31_tn1j7"]
[ext_resource type="Texture2D" uid="uid://cc13yhboq3p2m" path="res://assets/player/mascaras/Salto Salmón 3.png" id="32_ahx5a"]
[ext_resource type="Texture2D" uid="uid://bups0huvmlyut" path="res://assets/player/mascaras/Ciervo palanca 3.png" id="32_hopxw"]
[ext_resource type="Texture2D" uid="uid://bmh2a0h5s4fkn" path="res://assets/player/mascaras/Idle 1.png" id="33_h7o46"]
[ext_resource type="Texture2D" uid="uid://bjay11vvnbqqs" path="res://assets/player/mascaras/MC Palanca 1.png" id="33_lrq8u"]
[ext_resource type="Texture2D" uid="uid://duhe0wwiy55qh" path="res://assets/player/mascaras/Idle1 Ciervo.png" id="33_q2x7o"]
[ext_resource type="Texture2D" uid="uid://bcto1e0nfspyf" path="res://assets/player/mascaras/Idle 2.png" id="34_0bojb"]
[ext_resource type="Texture2D" uid="uid://vlc28u0qsowb" path="res://assets/player/mascaras/MC Palanca 2.png" id="34_h7o46"]
[ext_resource type="Texture2D" uid="uid://c0iqtbhgqu8jl" path="res://assets/player/mascaras/Idle 2 Ciervo.png" id="34_y4t0h"]
[ext_resource type="Texture2D" uid="uid://cknxsgf0ibeje" path="res://assets/player/mascaras/MC Palanca 3.png" id="35_0bojb"]
[ext_resource type="Texture2D" uid="uid://cuyg5mrq6ij88" path="res://assets/player/mascaras/Oso palanca 1.png" id="36_5uuta"]
[ext_resource type="Texture2D" uid="uid://dbgdtomb6o5et" path="res://assets/player/mascaras/Salmón palanca 1.png" id="36_q2x7o"]
[ext_resource type="Texture2D" uid="uid://go16j31pcc03" path="res://assets/player/mascaras/Oso palanca 2.png" id="37_b787q"]
[ext_resource type="Texture2D" uid="uid://b4j61tt1jirne" path="res://assets/player/mascaras/Idle1 Oso.png" id="37_vchxa"]
[ext_resource type="Texture2D" uid="uid://r28acdyaq1tl" path="res://assets/player/mascaras/Salmón palanca 2.png" id="37_y4t0h"]
[ext_resource type="Texture2D" uid="uid://c0fbkr3kyb8ik" path="res://assets/player/mascaras/Oso palanca 3.png" id="38_3jn0c"]
[ext_resource type="Texture2D" uid="uid://dgou2hspjb5cw" path="res://assets/player/mascaras/Idle 2 Oso.png" id="38_5uuta"]
[ext_resource type="Texture2D" uid="uid://bnm5gllpptse4" path="res://assets/player/mascaras/Salmón palanca 3.png" id="38_vchxa"]
[ext_resource type="Texture2D" uid="uid://c6eq8oqqs1sgr" path="res://assets/player/mascaras/Idle1 Salmón.png" id="39_b787q"]
[ext_resource type="Texture2D" uid="uid://rxbr0pokkudp" path="res://assets/player/mascaras/Idle 2 Salmón.png" id="40_3jn0c"]
[ext_resource type="PackedScene" uid="uid://djqldl5uq6oy4" path="res://escenas/hud.tscn" id="52_hopxw"]

[sub_resource type="SpriteFrames" id="SpriteFrames_w7fad"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_v66k4")
}, {
"duration": 1.0,
"texture": ExtResource("3_w80mn")
}, {
"duration": 1.0,
"texture": ExtResource("4_68uh1")
}, {
"duration": 1.0,
"texture": ExtResource("5_0wi6y")
}, {
"duration": 1.0,
"texture": ExtResource("6_tn1j7")
}, {
"duration": 1.0,
"texture": ExtResource("7_hopxw")
}, {
"duration": 1.0,
"texture": ExtResource("8_lrq8u")
}, {
"duration": 1.0,
"texture": ExtResource("9_h7o46")
}, {
"duration": 1.0,
"texture": ExtResource("10_0bojb")
}, {
"duration": 1.0,
"texture": ExtResource("11_q2x7o")
}, {
"duration": 1.0,
"texture": ExtResource("12_y4t0h")
}],
"loop": false,
"name": &"agarrar_oso",
"speed": 11.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("24_nrm58")
}],
"loop": true,
"name": &"caida_ciervo",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_3w4lm")
}],
"loop": true,
"name": &"caida_normal",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("28_idkqs")
}],
"loop": false,
"name": &"caida_oso",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("32_ahx5a")
}],
"loop": false,
"name": &"caida_salmon",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_t5tro")
}, {
"duration": 1.0,
"texture": ExtResource("5_5vuvg")
}, {
"duration": 1.0,
"texture": ExtResource("6_ay70r")
}, {
"duration": 1.0,
"texture": ExtResource("7_eolwv")
}],
"loop": true,
"name": &"caminar_ciervo",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_63xfq")
}, {
"duration": 1.0,
"texture": ExtResource("4_3w4lm")
}, {
"duration": 1.0,
"texture": ExtResource("5_8mtn0")
}, {
"duration": 1.0,
"texture": ExtResource("6_t5tro")
}],
"loop": true,
"name": &"caminar_normal",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("11_ay70r")
}, {
"duration": 1.0,
"texture": ExtResource("12_eolwv")
}, {
"duration": 1.0,
"texture": ExtResource("13_yf8pj")
}, {
"duration": 1.0,
"texture": ExtResource("14_neflo")
}],
"loop": true,
"name": &"caminar_oso",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("15_mn7w3")
}, {
"duration": 1.0,
"texture": ExtResource("16_jt2sh")
}, {
"duration": 1.0,
"texture": ExtResource("17_sdwtm")
}, {
"duration": 1.0,
"texture": ExtResource("18_abcdt")
}],
"loop": true,
"name": &"caminar_salmon",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("33_q2x7o")
}, {
"duration": 1.0,
"texture": ExtResource("34_y4t0h")
}],
"loop": true,
"name": &"idle_ciervo",
"speed": 3.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("33_h7o46")
}, {
"duration": 1.0,
"texture": ExtResource("34_0bojb")
}],
"loop": true,
"name": &"idle_normal",
"speed": 2.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("37_vchxa")
}, {
"duration": 1.0,
"texture": ExtResource("38_5uuta")
}],
"loop": true,
"name": &"idle_oso",
"speed": 2.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("39_b787q")
}, {
"duration": 1.0,
"texture": ExtResource("40_3jn0c")
}],
"loop": true,
"name": &"idle_salmon",
"speed": 2.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("30_0wi6y")
}, {
"duration": 1.0,
"texture": ExtResource("31_tn1j7")
}, {
"duration": 1.0,
"texture": ExtResource("32_hopxw")
}],
"loop": false,
"name": &"palanca_ciervo",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("33_lrq8u")
}, {
"duration": 1.0,
"texture": ExtResource("34_h7o46")
}, {
"duration": 1.0,
"texture": ExtResource("35_0bojb")
}],
"loop": false,
"name": &"palanca_normal",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("36_5uuta")
}, {
"duration": 1.0,
"texture": ExtResource("37_b787q")
}, {
"duration": 1.0,
"texture": ExtResource("38_3jn0c")
}],
"loop": false,
"name": &"palanca_oso",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("36_q2x7o")
}, {
"duration": 1.0,
"texture": ExtResource("37_y4t0h")
}, {
"duration": 1.0,
"texture": ExtResource("38_vchxa")
}],
"loop": false,
"name": &"palanca_salmon",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("9_63xfq")
}, {
"duration": 1.0,
"texture": ExtResource("10_3w4lm")
}],
"loop": false,
"name": &"salto-normal",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("23_4csdi")
}, {
"duration": 1.0,
"texture": ExtResource("24_nrm58")
}],
"loop": false,
"name": &"salto_ciervo",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("27_kc3iu")
}, {
"duration": 1.0,
"texture": ExtResource("28_idkqs")
}],
"loop": false,
"name": &"salto_oso",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("31_ewafl")
}, {
"duration": 1.0,
"texture": ExtResource("32_ahx5a")
}],
"loop": false,
"name": &"salto_salmon",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("5_0wi6y")
}, {
"duration": 1.0,
"texture": ExtResource("6_tn1j7")
}, {
"duration": 1.0,
"texture": ExtResource("7_hopxw")
}, {
"duration": 1.0,
"texture": ExtResource("8_lrq8u")
}, {
"duration": 1.0,
"texture": ExtResource("9_h7o46")
}],
"loop": true,
"name": &"seguir_agarrando",
"speed": 11.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_b787q"]
size = Vector2(48, 139)

[sub_resource type="CircleShape2D" id="CircleShape2D_j7xnp"]
radius = 41.880783

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3jn0c"]
size = Vector2(2, 20)

[node name="Player" type="CharacterBody2D"]
collision_mask = 7
script = ExtResource("1_esbpa")
tiempo_maximo_en_aire = 10.0
velocidad_salto_con_mascara = -800
velocidad_al_agarrar = 50.35

[node name="FmodBankLoader" type="FmodBankLoader" parent="."]
bank_paths = ["res://assets/audio/FmodBanks/Desktop/SFX.bank"]

[node name="AnimatedSpritePJ" type="AnimatedSprite2D" parent="."]
unique_name_in_owner = true
texture_filter = 1
scale = Vector2(0.3, 0.3)
sprite_frames = SubResource("SpriteFrames_w7fad")
animation = &"idle_normal"
frame_progress = 0.8192885

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(15, -13.5)
shape = SubResource("RectangleShape2D_b787q")

[node name="AreaTirar" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="AreaTirar"]
shape = SubResource("CircleShape2D_j7xnp")
debug_color = Color(1.2513996e-06, 0.6431121, 0.31144592, 0.41960785)

[node name="PinJointAgarrar" type="PinJoint2D" parent="."]
unique_name_in_owner = true
position = Vector2(58, -8)
node_a = NodePath("..")
node_b = NodePath("../MANO-TEST-IZQ")
disable_collision = false

[node name="TimerCoyoteTime" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 0.25
one_shot = true

[node name="MascaraTiempos" parent="." instance=ExtResource("4_k4kro")]
unique_name_in_owner = true

[node name="RayCastIzq" type="RayCast2D" parent="."]
unique_name_in_owner = true
position = Vector2(-47, 0)
target_position = Vector2(0, 55)

[node name="RayCastDer" type="RayCast2D" parent="."]
unique_name_in_owner = true
position = Vector2(47, 0)
target_position = Vector2(0, 55)

[node name="MascaraFuerza" parent="." instance=ExtResource("5_t3yu4")]
unique_name_in_owner = true

[node name="MascaraTraducciones" parent="." instance=ExtResource("6_r4hsq")]
unique_name_in_owner = true

[node name="FmodEventEmitter2D" type="FmodEventEmitter2D" parent="."]
event_name = "event:/Personaje/Movimiento/pasos"
event_guid = "{60f647bc-9dc2-4ff2-9a28-3e3d5b3fb282}"
fmod_parameters/Superficie/id = -5155162075446807488
fmod_parameters/Superficie = "pasto"
fmod_parameters/Superficie/labels = PackedStringArray("pasto", "madera", "piedra")
fmod_parameters/Superficie/variant_type = 4
unique_name_in_owner = true

[node name="FmodEventEmitter2D2" type="FmodEventEmitter2D" parent="."]
event_name = "event:/Personaje/Movimiento/salto"
event_guid = "{f53bcf20-29b6-434f-bdfb-043bdc67c2fb}"
fmod_parameters/Superficie/id = -5155162075446807488
fmod_parameters/Superficie = "pasto"
fmod_parameters/Superficie/labels = PackedStringArray("pasto", "madera", "piedra")
fmod_parameters/Superficie/variant_type = 4
unique_name_in_owner = true

[node name="FmodEventEmitter2D3" type="FmodEventEmitter2D" parent="."]
event_name = "event:/Objetos/arrastrar piedra"
event_guid = "{2166ce82-c481-4140-ac4f-55290734fe8b}"
fmod_parameters/Peso/id = 8505785322959852152
fmod_parameters/Peso = 0.5
fmod_parameters/Peso/variant_type = 3
fmod_parameters/Material/id = -768118463292944790
fmod_parameters/Material = "Piedra"
fmod_parameters/Material/labels = PackedStringArray("Piedra", "Madera")
fmod_parameters/Material/variant_type = 4
unique_name_in_owner = true

[node name="FmodEventEmitter2D4" type="FmodEventEmitter2D" parent="."]
event_name = "event:/Personaje/Movimiento/aterrizar"
event_guid = "{9914084c-c171-4e3c-9582-0e37728b8a1b}"
fmod_parameters/Superficie/id = -5155162075446807488
fmod_parameters/Superficie = "pasto"
fmod_parameters/Superficie/labels = PackedStringArray("pasto", "madera", "piedra")
fmod_parameters/Superficie/variant_type = 4

[node name="TimerTiempoEnAire" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 10.0
one_shot = true

[node name="FmodEventEmitter2D5" type="FmodEventEmitter2D" parent="."]
event_name = "event:/Personaje/Movimiento/caida"
event_guid = "{fbc63101-c1f0-46e6-ab63-d76fad8983e3}"
volume = 0.5

[node name="HUD" parent="." instance=ExtResource("52_hopxw")]

[node name="FmodEventEmitter2D6" type="FmodEventEmitter2D" parent="."]
event_name = "event:/Mascaras/equipar"
event_guid = "{16488a59-bdd1-4164-9f3c-6f66071df1d8}"

[node name="FmodEventEmitter2D7" type="FmodEventEmitter2D" parent="."]
event_name = "event:/Personaje/Morir"
event_guid = "{ea3f93cf-6587-4284-a571-252290d8e701}"

[node name="RayCast2DSuelo" type="RayCast2D" parent="."]
target_position = Vector2(0, 134)

[node name="MANO-TEST-IZQ" type="StaticBody2D" parent="."]
unique_name_in_owner = true
position = Vector2(53, -7)
collision_layer = 128
collision_mask = 128

[node name="CollisionManoIzq" type="CollisionShape2D" parent="MANO-TEST-IZQ"]
unique_name_in_owner = true
position = Vector2(-12, 0)
shape = SubResource("RectangleShape2D_3jn0c")

[node name="MANO-TEST-Der" type="StaticBody2D" parent="."]
unique_name_in_owner = true
position = Vector2(1, -7)
collision_layer = 128
collision_mask = 128

[node name="CollisionManoDer" type="CollisionShape2D" parent="MANO-TEST-Der"]
unique_name_in_owner = true
position = Vector2(-12, 0)
shape = SubResource("RectangleShape2D_3jn0c")

[connection signal="animation_changed" from="AnimatedSpritePJ" to="." method="_on_animated_sprite_pj_animation_changed"]
[connection signal="animation_finished" from="AnimatedSpritePJ" to="." method="_on_animated_sprite_pj_animation_finished"]
[connection signal="frame_changed" from="AnimatedSpritePJ" to="." method="_on_animated_sprite_pj_frame_changed"]
[connection signal="body_entered" from="AreaTirar" to="." method="_on_area_tirar_body_entered"]
[connection signal="body_exited" from="AreaTirar" to="." method="_on_area_tirar_body_exited"]
[connection signal="timeout" from="TimerTiempoEnAire" to="." method="_on_timer_tiempo_en_aire_timeout"]
